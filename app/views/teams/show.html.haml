%h2 #{@race.year} Lap Times
%h3= @team.position_and_name

%p <b>Warning!</b> We may have to take these lap time pages down if the site gets overloaded. If so, we'll put them back up at the end of the race, if not sooner. Consider yourselves warned!

%table#lap-times
  %col{:width => "80"}
  %col{:width => "140"}
  %col{:width => "140"}
  %thead
    %tr
      %th Lap Number
      %th Since Last Lap
      %th Since Start of Race
  %tbody
    - last_lap = nil
    - @team.points.select(&:lap?).each_with_index do |lap, i|
      %tr
        %td= i+1
        %td= lap.since_last(last_lap)
        %td= lap.since_start
      - last_lap = lap
      
%table#bonuses
  %col{:width => "100"}
  %col{:width => "80"}
  %thead
    %tr
      %th{:colspan => "2"} Bonuses
  %tbody
    - @team.points.select(&:bonus?).each_with_index do |bonus, i|
      %tr
        %td
          Bonus
          = i+1
        %td= bonus.qty
      
%table#penalties
  %col{:width => "100"}
  %col{:width => "80"}
  %thead
    %tr
      %th{:colspan => "2"} Penalties
  %tbody
    - @team.points.select(&:penalty?).each_with_index do |penalty, i|
      %tr
        %td
          Penalty
          = i+1
        %td= penalty.qty

%hr.clear      

= link_to "&laquo; Back to Leader Board", leader_board_path(@race.year)
