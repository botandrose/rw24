= error_messages_for @team, object_name: "team"

= form_for [:admin, @site, @race, @team] do |form|
  = form.hidden_field :race_id
  %h2
    = form.object.new_record? ? "New" : "Edit"
    Team

  %fieldset
    %h4 Team Information
    - if form.object.persisted?
      .field= form.number_field :position, label: "POS#", class: "xlarge"

    .field= form.select :category, Team.categories, label: true
    .field= form.text_field :name, label: "Team Name", class: "xlarge"
    - if @race.year >= 2018
      .field= render "shirt_sizes", form: form

  %fieldset
    .info-text To remove riders, highlight the <i class="fa fa-trash"></i> icon and press Save.
    .rider-flex
      - i = 1
      = form.fields_for :riders do |rider_form|
        .field
          %fieldset.rider-fields{ id: "rider_#{i}" }
            .remove-rider
              %input(type="checkbox" id="remove-rider-#{i}" class="remove-rider-input")
              %label(for="remove-rider-#{i}")
                %span Remove rider #{i}
            %h4
              Rider #{i}
              = "/ Team Leader" if i == 1
            .field= rider_form.check_box :paid, label: "Paid?"
            .field= rider_form.text_field :name, label: true
            .field= rider_form.text_field :email, label: true
            .field= rider_form.text_field :phone, label: true
            .field= rider_form.text_area :notes, label: true

        - i += 1

      - if form.object.persisted?
        .field= link_to "+ Add a rider", [:new, :admin, @site, @race, @team, :rider]

  %hr

  - save_or_cancel_links form, cancel_url: [:admin, @site, @race, :teams]

